<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="title" content="Command Prompt">
  <meta name="description" content="A custom command prompt in the browser.">
  <meta name="author" content="SlimeTube">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Command Prompt</title>
  <link rel="stylesheet" href="https://slimetube.github.io/vga.ttf">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #000;
      color: #fff;
      font-family: 'VGA', monospace;
      overflow: hidden;
    }
    #terminal {
      padding: 10px;
      white-space: pre-wrap;
      overflow-y: auto;
      height: calc(100% - 30px);
    }
    #input-line {
      display: flex;
      align-items: center;
    }
    #prefix {
      color: #0f0;
      margin-right: 5px;
    }
    #input {
      flex: 1;
      background: none;
      border: none;
      color: white;
      font: inherit;
      outline: none;
    }
    #username-display {
      position: absolute;
      bottom: 5px;
      right: 10px;
      color: #0f0;
      font-size: 12px;
    }
    #nojs-warning, #nols-warning {
      background: red;
      color: white;
      text-align: center;
      padding: 5px;
    }
  </style>
  <noscript><div id="nojs-warning">‚ö†Ô∏è JavaScript is disabled. This terminal won't work without it.</div></noscript>
  <script>
    if (!window.localStorage) {
      document.write('<div id="nols-warning">‚ö†Ô∏è localStorage is not available. Your settings will not be saved.</div>');
    }
  </script>
</head>
<body>
  <div id="terminal"></div>
  <div id="input-line">
    <span id="prefix">></span>
    <input id="input" autocomplete="off" autofocus />
  </div>
  <div id="username-display"></div>
  <script>
    const terminal = document.getElementById("terminal");
    const input = document.getElementById("input");
    const usernameDisplay = document.getElementById("username-display");

    const webhookURLs = {
      pizzzza: "https://discord.com/api/webhooks/1393389311940100096/HZ2UJdrhl42KH36zt-w3HUF6jUPlSASDZBtxcpmiCVhhu6Mjy3yloWLG-9E4Aag78bCn",
      dscrd: "https://discord.com/api/webhooks/1393396765012660224/weXmVY6hr6lu25FmDQnmmLSvjEcqnWH6LKGzku-aBI32C3uflaH7eu4sbICNv78HCVN-",
      vee: "https://discord.com/api/webhooks/1393389311940100096/HZ2UJdrhl42KH36zt-w3HUF6jUPlSASDZBtxcpmiCVhhu6Mjy3yloWLG-9E4Aag78bCn"
    };

    const slurList = ["nigga", "nigger", "faggot", "retard"];
    const usernameOptions = ["bubble app", "Hold Up", "SillyBilly1234", "iCarlyFan5465"];
    const username = localStorage.username ||= usernameOptions[Math.floor(Math.random() * usernameOptions.length)];
    usernameDisplay.textContent = `Username: ${username}`;
    let greeted = false;

    function output(text) {
      const div = document.createElement("div");
      div.textContent = text;
      terminal.appendChild(div);
      terminal.scrollTop = terminal.scrollHeight;
    }

    function sendWebhook(url, content, usernameOverride = username, avatar = null) {
      fetch(url, {
        method: "POST",
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          username: usernameOverride,
          avatar_url: avatar,
          content: content
        })
      });
    }

    const commands = {
      help: () => {
        output("Commands: help, pizz-zza, littlecaesars, dscrd, unix, music, stop, webhookpfp, pfp, ghls");
      },
      pizzzza: () => {
        sendWebhook(webhookURLs.pizzzza, `üçï ${username} ordered Little Caesars!`);
        output("Order sent to Little Caesars.");
      },
      littlecaesars: () => commands.pizzzza(),
      dscrd: () => {
        sendWebhook(webhookURLs.dscrd, `${username} pinged Discord!`);
        output("Pinged Discord webhook.");
      },
      unix: args => {
        const time = parseInt(args[0]);
        if (isNaN(time)) return output("Invalid number.");
        const date = new Date(time * 1000);
        output(`Unix ${time} = ${date}`);
      },
      music: args => {
        if (!args[0]) return output("Provide an audio URL.");
        const audio = new Audio(args[0]);
        audio.loop = true;
        audio.play();
        window._music = audio;
        output(`Playing ${args[0]} in loop...`);
      },
      stop: () => {
        if (window._music) {
          window._music.pause();
          window._music = null;
          output("Music stopped.");
        }
      },
      webhookpfp: () => {
        fetch("https://discord.com/api/webhooks/1393389311940100096/HZ2UJdrhl42KH36zt-w3HUF6jUPlSASDZBtxcpmiCVhhu6Mjy3yloWLG-9E4Aag78bCn")
          .then(res => res.json())
          .then(data => output(`Webhook PFP: ${data.avatar_url || 'None'}`));
      },
      pfp: () => commands.webhookpfp(),
      ghls: async args => {
        const repo = args[0] || "slimetube/slimetube.github.io";
        const path = args[1] || "";
        const res = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`);
        if (!res.ok) return output("Repo or path not found.");
        const data = await res.json();
        if (!Array.isArray(data)) return output("Unexpected response.");
        data.forEach(item => {
          output(`${item.type.toUpperCase()}: ${item.name}`);
        });
      }
    };

    input.addEventListener("keydown", e => {
      if (e.key === "Enter") {
        const raw = input.value.trim();
        input.value = "";
        if (!raw) return;

        for (const slur of slurList) {
          if (raw.toLowerCase().includes(slur)) {
            output("‚ö†Ô∏è Inappropriate input blocked.");
            return;
          }
        }

        output(`> ${raw}`);
        const [cmd, ...args] = raw.split(" ");
        if (commands[cmd]) {
          commands[cmd](args);
        } else {
          output(`Command not found: ${cmd}`);
        }
      }
    });

    window.onload = () => {
      if (!greeted && Math.random() < 1 / 512) {
        output("üåü Vee welcomes you!");
        sendWebhook(webhookURLs.vee, `Vee has greeted ${username}.`, "Vee", "https://slimetube.github.io/src/vee.webp");
        greeted = true;
      }

      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has("cmd")) {
        input.value = urlParams.get("cmd");
        input.dispatchEvent(new KeyboardEvent("keydown", {key: "Enter"}));
      }
    };
  </script>
</body>
</html>
